.row
  - per_month = 0
  - @dates_array.each do |date|
    - date_shorter = date.strftime("%m-%Y")
    - monthly_earnings = @monthly_earnings[date_shorter]

    .col-md-2{:style => "border: 1px solid; height: 70px;"}
      %b= date_shorter
      %br
      - if !monthly_earnings.blank?
        - wanted_net = @all_users.count * WantedSalary.wanted_salary_for_date(date).first.net
        - if monthly_earnings < wanted_net
          %font{:style => "color: #FF9933;"}= "#{monthly_earnings} EUR , w: #{wanted_net} EUR "
          %br
          %font{:style => "color: #CC3333;"}="d:#{wanted_net-monthly_earnings}"
        - else
          %font{:style => "color: green;"}= "#{monthly_earnings} EUR"
        - per_month = per_month + monthly_earnings
      - else
        %font{:style => "color: red;"}= "0 EUR"
  %div{:style => "clear:left;"}
    = "Average per month:"
    %b=" #{(per_month / @dates_array.count).round(2)} EUR"

.row
  - per_year = 0
  - @yearly_earnings.keys.each do |key|
    - per_year = per_year + @yearly_earnings[key]
    .col-md-2{:style => "border: 1px solid;"}
      %b= key
      %br
      = "#{@yearly_earnings[key]} EUR"
  %div{:style => "clear:left;"}
    = "Average per year:"
    %b=" #{(per_year / @yearly_earnings.keys.count).round(2)} EUR"

.row
  - per_company = 0
  - @company_earnings.keys.each do |key|
    .col-md-2{:style => "border: 1px solid;"}
      - per_company = per_company + @company_earnings[key]
      %b= OurCompany.find(key).name
      %br
      = "#{@company_earnings[key]} EUR"
  %div{:style => "clear:left;"}
    = "Average per company:"
    %b=" #{(per_company / @company_earnings.keys.count).round(2)} EUR"

